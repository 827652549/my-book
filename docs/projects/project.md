面试官提问的时候，更多倾向于提问：

（腾讯夺命连环问）
-  说一下你在这个项目中主要负责什么？
-  看到你用到了XXX，为什么使用XXX？
-  除了XXX你还知道什么类似的框架/库/脚本？//回答AAA
-  AAA和XXX有什么区别？
-  为什么不使用AAA而使用XXX？


## 直播的解决方案

使用过的解决方案：先用vlc执行rtsp协议来读取摄像头视频数据，测试成功。后来找到一个叫做JavaCV的库，它实现了OpenCV, FFmpeg等等。然后通过这个库可以在Java中设置请求连接rtsp，获取到视频流。
后来也写了保存成录像，后来使用了阿里云的对象存储OSS，设置文件为可写策略，通过阿里云API进行调用并执行"追加上传"的功能，不同于其他文件系统的覆盖上传，它是可以直接在文件对象后追加数据，也正是因此方便了这种类似直播功能的实现。

其实这个项目是一个"远程自动控制机器手臂"的javafx项目，通过远程视频监控拖动滑动条组件进行数据信号控制运动，并添加机械手臂的保存功能。

## 海量日志中ip的统计

假设是一个大文件，基于对内存的限制，首先要对于日志进行拆分成小文件，然后统计小文件中的ip最后得到汇总数据。这个场景我们可以考虑使用云服务，说一下我了解的阿里云的服务，例如阿里云的批量计算，我们可以将日志文件存储到OSS中，利用它可以弹性扩大文件的特性，通过追加上传的方式不断地向日志文件添加新内容。最后，我们可以直接利用阿里云批量计算服务，将数据进行拆分，然后交给云端分布式并发计算，最后marge合并返回最终结果。

不过最好是对每日的文件按照规模进行存储，比如每个日志文件超过50m就进建新log文件，以日期和时间命名，分别放到每日的文件夹中，方便检索和提取。

## 购物车，打开多个窗口/tap，如果让数据保持同步

就比如商城页面打开两个，第一个窗口里添加商品，第二个窗口怎么能同步更新

**方案一：localStorage**：

**简要概述：**

数据存储在localStorage，监听storage，在数据变动时能够在storage事件的event参数中识别和获取到变动的数据，进而带动数据的同步。

**详细阐述：**

localStorage只能实现同一浏览器相同域名、相同协议、相同端口下的多个标签页之间的通信。不同浏览器没有该效果。

localStorage是Storage对象的实例。对Storage对象进行任何修改，都会在文档上触发storage事件。当通过属性或者setItem()方法保存数据，使用delete操作符或removeItem()删除数据，或者调用clear()方法时，都会发生该事件。

storage事件的event对象有以下属性：

- domin：发生变化的存储空间的域名；
- key：设置或者删除的键名；
- newValue：如果是设置值，则为新值；如果是删除值，则是null；
- oldValue：键被更改之前的值；

**方案二：cookie+setInterval**:

**简要概述：**

一个页面产生的cookie能被这个页面的统一目录和子目录下的页面访问，通常把cookie的path设置为一个更高级别的目录，从而使更多的页面共享cookie，实现多页面之间相互通信。然后通过setInterval进行轮询获取cookie并加以处理

**额外补充：**

cookie的参数：

- path：cookie所在的目录，默认为/，即根目录， 通常用来解决同域下cookie的访问问题
- domain ：cookie所在的域，默认为请求的地址，通过设置document.domain可以实现跨域访问

